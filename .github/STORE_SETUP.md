# üè™ Package Store Setup Guide

This guide explains how to configure GitHub Actions secrets for automatic publishing to package managers.

## Required Secrets

Go to **Repository Settings ‚Üí Secrets and variables ‚Üí Actions** and add:

### 1. Homebrew Tap (`HOMEBREW_TAP_TOKEN`)

**Purpose**: Push formula updates to your Homebrew tap repository.

1. Create a new repository: `homebrew-tap` (or `homebrew-tsnake`)
2. Go to https://github.com/settings/tokens
3. Generate new token (classic) with `repo` scope
4. Add as secret: `HOMEBREW_TAP_TOKEN`

**Manual setup**:
```bash
# Create tap repo structure
mkdir -p Formula
# The workflow will generate tsnake.rb automatically
```

---

### 2. Snap Store (`SNAP_STORE_TOKEN`)

**Purpose**: Publish snaps to the Snap Store.

1. Install snapcraft: `sudo snap install snapcraft --classic`
2. Login: `snapcraft login`
3. Export credentials:
   ```bash
   snapcraft export-login --snaps=tsnake --acls=package_upload exported.txt
   cat exported.txt
   ```
4. Add entire file content as secret: `SNAP_STORE_TOKEN`

**Register snap name first**:
```bash
snapcraft register tsnake
```

---

### 3. AUR (Arch User Repository)

**Manual process** - no secret needed, but requires:

1. Create AUR account: https://aur.archlinux.org/register
2. Add SSH key to AUR account
3. Clone AUR package:
   ```bash
   git clone ssh://aur@aur.archlinux.org/tsnake.git
   ```
4. Add PKGBUILD (generated by workflow)
5. Push updates manually after each release

**PKGBUILD template** is generated automatically by the workflow.

---

### 4. Flathub

**Manual process** - requires PR to Flathub:

1. Fork https://github.com/flathub/flathub
2. Create branch with app ID: `io.github.marquesm91.tsnake`
3. Add manifest (generated by workflow)
4. Submit PR

After approval, updates are automatic via GitHub releases.

---

### 5. Windows - Winget (`WINGET_TOKEN`)

**Purpose**: Submit to Windows Package Manager.

1. Fork https://github.com/microsoft/winget-pkgs
2. Generate GitHub token with `public_repo` scope
3. Add as secret: `WINGET_TOKEN`

**First submission is manual**:
```bash
wingetcreate new https://github.com/marquesm91/TerminalSnake/releases/download/v1.0.0/tsnake-windows-x64.zip
```

---

### 6. Chocolatey (`CHOCOLATEY_API_KEY`)

**Purpose**: Publish to Chocolatey Community Repository.

1. Create account: https://community.chocolatey.org/account/Register
2. Get API key: https://community.chocolatey.org/account
3. Add as secret: `CHOCOLATEY_API_KEY`

**First-time setup**:
```powershell
choco apikey --key $env:CHOCOLATEY_API_KEY --source https://push.chocolatey.org/
choco push tsnake.1.0.0.nupkg --source https://push.chocolatey.org/
```

---

## Quick Start Checklist

| Store | Secret Name | Status |
|-------|-------------|--------|
| Homebrew | `HOMEBREW_TAP_TOKEN` | ‚¨ú Add token |
| Snap Store | `SNAP_STORE_TOKEN` | ‚¨ú Export credentials |
| AUR | (manual) | ‚¨ú Create account |
| Flathub | (manual) | ‚¨ú Submit PR |
| Winget | `WINGET_TOKEN` | ‚¨ú Add token |
| Chocolatey | `CHOCOLATEY_API_KEY` | ‚¨ú Add API key |

## Testing Locally

```bash
# Test Homebrew formula
brew install --build-from-source ./tsnake.rb

# Test Snap
snapcraft --debug
snap install ./tsnake_*.snap --dangerous

# Test Flatpak
flatpak-builder --user --install build io.github.marquesm91.tsnake.yml
```

## Trigger Manual Publish

After adding secrets, you can manually trigger the publish workflow:

1. Go to Actions ‚Üí "Publish to Package Managers"
2. Click "Run workflow"
3. Select branch and run

Or create a new release tag:
```bash
git tag v1.0.0
git push origin v1.0.0
```
